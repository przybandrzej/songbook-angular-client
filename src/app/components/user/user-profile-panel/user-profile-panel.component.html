<mat-card fxLayoutGap="30px">
  <mat-card-header>
    <mat-card-title>{{user.username}}</mat-card-title>
    <mat-card-subtitle>{{roleName}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content fxLayoutAlign="start start" fxLayoutGap="10px" fxLayout="row">

    <div fxLayout="column" fxLayoutAlign="space-around start" fxLayoutGap="10px">
      <div class="image-wrapper" (click)="changeUserProfile()">
        <img class="avatar-placeholder" [src]="user.imageUrl" alt="user avatar">
        <div class="overlay" fxLayoutAlign="center center">Update image</div>
      </div>
      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
        <span>Username: {{user.username}}</span>
        <!-- <button mat-button>
          <mat-icon>edit</mat-icon>
        </button> -->
      </div>
      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center">
        <span>Email: {{user.email}}</span>
        <button mat-icon-button (click)="editEmail()" *ngIf="!editableEmail">
          <mat-icon>edit</mat-icon>
        </button>
        <mat-form-field *ngIf="editableEmail">
          <mat-label>Email</mat-label>
          <input matInput placeholder="write email here..."
                 [(ngModel)]="emailToUpdate">
        </mat-form-field>
        <button *ngIf="editableEmail" mat-stroked-button (click)="updateEmailName()">Update</button>
      </div>
      <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
        <span>First name: {{user.firstName}}</span>
        <button mat-button (click)="editFirstName()" *ngIf="!editableFirstName">
          <mat-icon>edit</mat-icon>
        </button>
        <mat-form-field *ngIf="editableFirstName">
          <mat-label>First name</mat-label>
          <input matInput placeholder="write name here..."
                 [(ngModel)]="firstNameToUpdate">
        </mat-form-field>
        <button *ngIf="editableFirstName" mat-stroked-button (click)="updateFirstName()">Update</button>
      </div>
      <div fxLayout="row" fxLayoutGap="4px" fxLayoutAlign="start center">
        <span>Last name: {{user.lastName}}</span>
        <button mat-button (click)="editLastName()" *ngIf="!editableLastName">
          <mat-icon>edit</mat-icon>
        </button>
        <mat-form-field *ngIf="editableLastName">
          <mat-label>Last name</mat-label>
          <input matInput placeholder="write name here..."
                 [(ngModel)]="lastNameToUpdate">
        </mat-form-field>
        <button *ngIf="editableLastName" mat-stroked-button (click)="updateLastName()">Update</button>
      </div>
      <div>
        <span>Registered: {{user.registrationDate | dateFormatPipe}}</span>
      </div>
      <div>
        <span>Songs in library: {{user.songs.length}}</span>
      </div>
      <button mat-stroked-button (click)="resetPassword()">Reset password</button>
      <span *ngIf="resetActivated">Password reset email has been sent</span>
    </div>

    <div fxLayoutAlign="center center">
      <app-warning-message-box *ngIf="errorMessages.length > 0" [messages]="errorMessages"></app-warning-message-box>
      <app-success-message-box *ngIf="successMessage.length > 0" [messages]="[successMessage]"></app-success-message-box>
    </div>

  </mat-card-content>

</mat-card>
